---
layout: post
title: Restaurer des fichiers systèmes sous GNU/Linux grâce au CD d'installation
tags:
- CD
- GNU/Linux
- solution
- Tutoriels
status: publish
type: post
published: true
meta:
  dsq_thread_id: '466377138'
---
Il arrive à tous de faire des erreurs et lorsqu'il s'agit de la <strong>suppression de fichiers systèmes</strong>, on pense souvent à réinstaller tout le système. Il n'est pas nécessaire de procéder à cette <strong>solution extrême</strong> si vous avez encore accès à un terminal.

Voici une solution qui vous permettra de <strong>restaurer un fichier système connaissant son adresse</strong> en utilisant un <strong>Terminal</strong> et le <strong>CD d'installation</strong> de la distribution actuelle.

<!--more-->

L'opération va consister à <strong>récupérer les fichiers systèmes perdus ou endommagés</strong> depuis le CD d'installation pour les <strong>replacer dans le bon dossier</strong>.

Si vous n'avez plus accès à votre session, vous pouvez aussi effectuer les opérations en <acronym title="accessible depuis le grub au démarrage de l'ordinateur">"recovery mode"</acronym>.
<h2>Le tutoriel</h2>
<ul>
	<li><strong>Insérez le disque d'installation</strong> correspondant à la distribution en question (il est important d'avoir la bonne version et la bonne architecture)</li>
</ul>
<h3>Avec un terminal</h3>
<ol>
	<li>Vérifiez que le <strong>montage du CD-rom</strong> est effectué. Autrement montez le avec <strong>mount</strong>.</li>
	<li><strong>Entrez dans le CD-rom d'installation</strong> puis dans le dossier <strong>casper</strong>.</li>
	<li>Montez le fichier <strong>filesystem.squashfs</strong> contenant tout les fichiers systèmes de la distribution courante.
<ul>
	<li>Il faut pour cela disposer d'un point de montage. Soit vous utilisez un point de montage existant, soit vous créez un dossier vide pour l'occasion.</li>
	<li>Ensuite <strong>on monte le fichier filesystem.squashfs</strong> sur notre point de montage avec mount : <pre>mount -t squashfs -o loop filesystem.squashfs /point/de/montage/</pre>.</li>
</ul>
</li>
	<li>Nous n'avons alors plus qu'à effectuer tous les déplacements nécessaires pour restaurer nos fichiers au moyen de la commande <strong><strong>cp</strong></strong>. <strong>Attention aux fausses manipulations</strong>.</li>
	<li>Une fois toutes les restaurations effectuées, démontez le fichier <strong>filesystem.squashfs</strong> et supprimez le <strong>si et seulement si</strong> vous l'aviez précédemment créé.</li>
	<li><strong>Redémarrez votre ordinateur</strong> si les résolutions de problèmes ne sont pas encore effectives.</li>
</ol>
<h4>Exemple</h4>
Voici un exemple de la restauration de l'exécutable <strong>/usr/bin/dpkg</strong> (malencontreusement supprimé) sous Ubuntu.

<code lang="bash">mount /cdrom
cd /cdrom/casper
sudo mkdir /media/pointdemontage
sudo mount -t squashfs -o loop filesystem.squashfs /media/pointdemontage
sudo cp /media/pointdemontage<strong>/usr/bin/dpkg /usr/bin/dpkg
sudo umount /media/pointdemontage
sudo rmdir /media/pointdemontage/
</code>
