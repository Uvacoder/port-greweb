---
layout: post
title: Automating Web App development for multiple platforms
tags:
- development
- maintainability
- Mobile
- Programming
- Web
- webapp
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  _topsy_long_url: http://blog.greweb.fr/2011/06/automating-web-app-development-for-multiple-platforms/
  topsy_short_url: http://bit.ly/iycplx
  dsq_thread_id: '463659804'
---
In this article, we will explain why we'd choose web technologies to make applications and introduce <a href="/2011/06/automating-web-app-development-for-multiple-platforms/#webappbuilder"><strong>WebAppBuilder</strong></a>, a tool to easily build different instances of an application. We'll examine the <a href="http://same.greweb.fr/">Same Game Gravity</a> as an example.

Using web to develop mobile applications is very <strong>productive</strong> and web technologies are <strong>rich</strong>.

<a href="https://github.com/gre/WebAppBuilder">Fork WebAppBuilder on Github.</a>

<!--more-->

<h2>Rich?</h2>
New web technologies have become rich with CSS3, HTML5 and new Javascript APIs are now being supported on most of smartphones. CSS3 animations, Web Service usage, local storage, Geolocation, drawing shapes (Canvas),.. are some example of new web features.

I won't expand more on this topic but invite you to <a target="_blank" href="http://diveintohtml5.org/">visit this link</a> for more details.

<h2>Productive?</h2>
Compared to a native application, the web application <strong>paradigm is reversed</strong>.
The Web provide a common way to make applications. 
To develop a native application, you must adapt yourself for each device, each new API, or each new language,... but with Web, the device fits to you by proving bridges (accessible via JavaScript) to access device features! 
I mean, you don't need to dive into the Java Android API or Objective-C language (for iPhone/iPad), or any other API for other devices... You just have to learn <strong>web technologies</strong>.

We are in 2011, the "only desktop application" model is over now, and mobile and tablet are two new platforms you should be aware of. So it changes everything about the technology to use.

<h3>Having a common language for all instances</h3>
Instances of a single application can be numerous.
In fact, an application can be projected in at least 3 axis of instance : The <strong>platform</strong> (mobile, tablet, desktop, ...), the <strong>Operating System</strong> (Android, iPhone, webOS) and the <strong>application version</strong> (free version, full version, ...).

<img src="http://data.greweb.fr/blog/image/webapp/application-axis3.png" alt="" />

That's pretty expensive to develop X instances of an application. This is a problem for developing the first version and mainly for maintainability : You want to fix bugs and add features once, and only once.

<strong>So, the point is we need a common language to describe an application with multiple instances.</strong>

<h3>Web is great for that!</h3>
Computers have browsers, mobiles and tablets device have recent browsers.

To make your application development fully independent from the device, firstly you need a great <strong>framework</strong> to bridge your application and the device (like <a target="_blank" href="http://www.phonegap.com/">PhoneGap</a>), secondly you need a great tool to easily <strong>build</strong> all applications from your common source code.

First of all, let's see how to organize a web project.
<h3>Good practice</h3>

This is how I've organize my project :

<h4>The source code directory</h4>
This directory contains all your web app source code. You should keep your application source code (with HTML, CSS, Javascripts, images, sounds, ...) in one directory (like <em>/src</em> ).
You should <strong>avoid specific code</strong>, but sometimes you still need some specific behaviors for different devices. If so, I recommend you to put these differences inside different files (for exemple: <em>mobile.html</em>, <em>tablet.html</em>, <em>computer.html</em>,...).

<h4>Project skeletons</h4>
Keep one skeleton directory for each instance of your application.
A skeleton directory will contains all the specific code related to the platform/device/version.
<strong>Frameworks like PhoneGap bring you these skeletons.</strong>

<hr id="webappbuilder"/>

<h2>WebAppBuilder</h2>
<img src="http://data.greweb.fr/blog/image/webapp/webappmaker.png" alt="" />

I created <strong>WebAppBuilder : a lightweight Makefile to build your project</strong>. This is a mashup of existing cool stuff like : a small template system (Mustache), SASS with Compass, Javascript minimizer, ...

<h3>Features of WebAppBuilder</h3>
<ul>
<li>Template easily your HTML files with <a target="_blank" href="http://mustache.github.com/">Mustache</a>.</li>
<li>Copy, concatenate, minimize Javascripts however you want.</li>
<li>Retrieve Javascript files from URLs (useful for libraries).</li>
<li>Compile SASS files into CSS files (if you use <a target="_blank" href="http://sass-lang.com">this awesome stylesheets language</a>)</li>
<li>Support <a target="_blank" href="http://compass-style.org">Compass</a> if installed (you don't need to provide it in your source, only an import works)</li>
<li>Merge your CSS files.</li>
<li>Copy and optionally rename resources you want to include (images, fonts, sounds,...).</li>
<li>Error handling and atomicity : if one operation fail, the make fail (javascript syntax error, sass syntax error, ...)</li>
</ul>

You must have one Makefile per project skeleton, so you can easily define what to do with the <em>/src</em> for the related platform/device/OS.

<h3>Download or Contribute</h3>
<a href="https://github.com/gre/WebAppBuilder">Fork me on Github</a>

<h3>Example with my Same Game Gravity game</h3>
I developed these tools during the <a target="_blank" href="http://same.greweb.fr/">Same Game Gravity</a> game development. 

A <strong>make</strong> inside my android/ skeleton gives me :

<img src="http://data.greweb.fr/blog/image/webapp/webappmaker-term.png" alt="" />

And here is the Makefile I use :
<h4>Android Makefile</h4>
<script src="https://gist.github.com/995971.js?file=Makefile"></script>

<h3>Configuring your IDE</h3>
I use mainly komodo and geany as an IDE. They both have a build system. I recommand you to configure your IDE to make && open the page just by pressing a shortcut key.

<h3>Features planned</h3>
<ul>
<li>make should build the .apk for Android app</li>
</ul>

<h2>Special thanks</h2>
<ul>
<li>to <a target="_blank" href="http://mrspeaker.net/">mrspeaker</a> for English review.</li>
<li>to <a target="_blank" href="https://github.com/jquery/jquery/tree/master/build">jQuery build system</a> (js minifier)</li>
</ul>
