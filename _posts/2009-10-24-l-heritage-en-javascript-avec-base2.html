---
layout: post
title: L'héritage en JavaScript avec base2
tags:
- base2
- héritage
- javascript
- Programming
status: publish
type: post
published: true
meta:
  aktt_notify_twitter: 'no'
  dsq_thread_id: '464242615'
---
Le JavaScript est un langage très souple mais qui manque parfois de fonctionnalités si l'on en reste à ses bases.

Heureusement, de nombreuses bibliothèques sont là pour nous sauver la mise.

C'est en tout cas le cas pour le concept de l'héritage qui est rendu possible grâce à la bibliothèque <strong>base2</strong>.

Au lieu de réinventer la roue, nous pouvons utiliser cette bibliothèque et ainsi pouvoir mieux nous<strong> concentrer sur les véritables problèmes d'implémentation d'un projet</strong>.

<!--more-->
<h2>La théorie</h2>
<h3>petit résumé du JavaScript</h3>
<strong>JavaScript</strong> est un langage de programmation de scripts principalement utilisé dans les pages web.

C'est un langage <strong>orienté objets à prototype</strong>, c'est-à-dire que les bases du langage et ses principales interfaces sont fournies par des objets qui ne sont pas des instances de classes, mais qui sont chacun <strong>équipés de constructeurs permettant de générer leurs propriétés</strong>.

Il a été influencé par les langages <strong>Self</strong>, <strong>Perl</strong>, <strong>C</strong> et <strong>Java</strong>. Bien qu'inspiré du Java au niveau syntaxe, son utilisation est complètement différente malgré le rapprochement de nom.

<em>(en partie inspiré de <a href="http://fr.wikipedia.org/wiki/JavaScript">wikipédia</a>)</em>
<h3>base2</h3>
<strong><a href="http://code.google.com/p/base2/">lien du site officiel</a></strong>.
<blockquote>base2 is a lightweight library that irons out all the annoying differences in JavaScript implementations. It provides the additional functionality from JavaScript 1.6+ that only Mozilla browsers implement. It also adds some features from ES4. The library is only 6KB (gzipped).</blockquote>
<blockquote>base2 est une bibliothèque légère permettant d'éviter les ennuis d'implémentation du JavaScript. Elle fournit les fonctionnalités supplémentaires du JavaScript 1.6+ que seuls les navigateurs Mozilla implémentent. Elle ajoute également quelques fonctionnalités de ES4. La bibliothèque ne pèse que 6Ko (version gzippée).</blockquote>
<h2>La pratique</h2>
<h3>L'inclusion de base2 en html</h3>
Pour la bibliothèque, il faut ajouter, éventuellement dans son <strong><em>&lt;head&gt;</em></strong>, la ligne html suivante :
<code lang="html"><script src="base2-p.js" type="text/javascript"></script></code>
où <code>base2-p.js</code> est le lien vers le script .js de la bibliothèque.
<h3>Exemple d'utilisation de l'héritage</h3>
L'exemple est <a href="http://greweb.fr/demo/js-heritage/">hébergé ici</a>.
<h4>Forme.js :</h4>
<code lang="javascript">/*** Forme ***/
Forme = base2.Base.extend({
/* A l'instanciation de Forme, constructor est appelé. */
constructor: function() {
this.draw(); // On dessine la forme.
},
draw: function() {
alert("Dessinons quelque chose..."); // Avertissement
},
toString: function() {
return "Je suis une forme.";
}
})

/*** Rectangle extends Forme ***/
Rectangle = Forme.extend({
/* On ne surcharge pas constructor, par conséquent,
* le constructor de Forme sera exécuté à l'instanciation. */

/* On surcharge draw mais en gardant le comportement de l'ancien
* draw grâce à l'appel de this.base() en début de code. */
draw: function() {
this.base(); // appel de la methode de l'objet hérité
alert(this+'\n\n'+
'####\n'+
'####\n'+
'####\n');
},

/* Surcharge de toString */
toString: function() {
return "Je suis un rectangle.";
}
})

/*** Triangle extends Forme ***/
Triangle = Forme.extend({
draw: function() {
this.base();
alert(this+ // Ici, this.toString va être appelé
'\n\n#\n'+
'##\n'+
'###\n'+
'####\n');
},
toString: function() {
return "Je suis un triangle.";
}
})

/*** Carre extends Rectangle ***/
Carre = Rectangle.extend({
/* J'ai peut-être parfois envie de surcharger mon constructor */
constructor: function() {
alert("Et maintenant, pourquoi pas un carré ?");
this.draw();
},
draw: function() {
// Malheureusement pas de moyen d'appeler la "base().base() fonction"
alert(this+'\n\n'+
'###\n'+
'###\n'+
'###\n');
},

toString: function() {
return this.base()+" et aussi un carré.";
}
})</code>

<h4>index.html :</h4>

<code lang="html"><html>
<head>
<script type="text/javascript" src="base2-p.js"></script>
<script type="text/javascript" src="forme.js" charset="UTF-8"></script>
</head>
<body>
<script type="text/javascript">
var r = new Rectangle();
var t = new Triangle();
var c = new Carre();
</script>
</body>
</html></code>
